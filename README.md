<div align="right">
<a href="/README.md">ä¸­æ–‡</a> &nbsp;|&nbsp;
<a href="/README-EN.md">EN</a>
</div>

<div align="center">

![gear-wenxinworkshop-starter](https://socialify.git.ci/gemingjia/gear-wenxinworkshop-starter/image?font=Inter&forks=1&issues=1&language=1&name=1&owner=1&pattern=Floating%20Cogs&pulls=1&stargazers=1&theme=Light)

![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.1.0-brightgreen.svg)
![JDK](https://img.shields.io/badge/JDK-17.0.5-orange.svg)
![Maven](https://img.shields.io/badge/Maven-3.9-blue.svg)

![LICENSE](https://img.shields.io/github/license/gemingjia/gear-wenxinworkshop-starter?style=flat-square)
![COMMIT](https://img.shields.io/github/last-commit/gemingjia/gear-wenxinworkshop-starter?style=flat-square)
![LANG](https://img.shields.io/badge/language-Java-7F52FF?style=flat-square)

</div>
# Gear-WenXinWorkShop-Starter

## è·å–access-tokenæ–¹æ³•
![image](https://github.com/gemingjia/gear-wenxinworkshop-starter/assets/80268501/7225fb98-761a-4ead-b626-d59fc0931161)
å¯ç›´æ¥æŸ¥çœ‹ä¸‹é¢æ–‡ç« ï¼š

[ç”³è¯·æ–‡å¿ƒä¸€è¨€&æ–‡å¿ƒåƒå¸†å¤§æ¨¡å‹APIèµ„æ ¼ã€è·å–access_tokenï¼Œå¹¶ä½¿ç”¨SpringBootæ¥å…¥æ–‡å¿ƒä¸€è¨€API](https://juejin.cn/post/7260418945721991227)

---

1. å‰å¾€ [æ–‡å¿ƒä¸€è¨€èµ„æ ¼ç”³è¯·](https://cloud.baidu.com/product/wenxinworkshop) 

2. [å¡«å†™é—®å·](https://cloud.baidu.com/survey/qianfan.html)ï¼Œç­‰å¾…å®¡æ ¸é€šè¿‡ï¼ˆæˆ‘ç”¨äº†ä¸€å¤©åŠï¼‰

3. å®¡æ ¸é€šè¿‡åè¿›å…¥ [æ§åˆ¶å°](https://console.bce.baidu.com/ai/?_=#/ai/wenxinworkshop/overview/index)ï¼Œç‚¹å‡»[åˆ›å»ºåº”ç”¨](https://console.bce.baidu.com/ai/?_=#/ai/wenxinworkshop/app/create)
4. è¿›å…¥å·¦ä¾§ [åº”ç”¨åˆ—è¡¨](https://console.bce.baidu.com/ai/?_=#/ai/wenxinworkshop/app/list)ï¼Œå¤åˆ¶ `API Key` ä¸ `Secret Key`
5. å°†ä½ çš„ `API Key` ä¸ `Secret Key` æ›¿æ¢é“¾æ¥çš„[Key]ï¼Œè®¿é—®ä»¥ä¸‹åœ°å€
 > https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&client_id=[API-Key]&client_secret=[Secret-Key]

## ğŸ“– é¡¹ç›®ç®€ä»‹
- ç™¾åº¦ **â€œæ–‡å¿ƒåƒå¸† WENXINWORKSHOPâ€** å¤§æ¨¡å‹çš„spring-boot-starterï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿæ¥å…¥ç™¾åº¦çš„AIèƒ½åŠ›ï¼Œåªéœ€ä¸€è¡Œä»£ç å³å¯è°ƒç”¨ç™¾åº¦æ–‡å¿ƒåƒå¸†å¤§æ¨¡å‹ã€‚
- å®Œæ•´å¯¹æ¥æ–‡å¿ƒåƒå¸†çš„å®˜æ–¹APIæ–‡æ¡£ã€‚
- æ”¯æŒæ ¹æ®æç¤ºè¯ç”Ÿæˆå›¾ç‰‡ã€‚
- æ”¯æŒå¯¹è¯çš„æµå¼è¿”å›ã€‚
- å®Œæ•´æ”¯æŒæ–‡å¿ƒåƒå¸†å®˜ç½‘æ‰€æœ‰æ¨¡å‹APIï¼ŒåŒ…æ‹¬  `æ–‡å¿ƒä¸€è¨€ ErnieBot`ã€`ERNIE-Bot-turbo`ã€`BLOOMZ-7B`ã€`Ernie-Bot-VilG`ã€`VisualGLM-6B`ã€`Llama-2`ã€`Linly-Chinese-LLaMA-2-7B`ã€`Linly-Chinese-LLaMA-2-13B`ã€`ChatGLM2-6B`ã€`RWKV-4-World`ã€`OpenLLaMA-7B`ã€`Falcon-7B`ã€`Dolly-12B`ã€`MPT-7B-Instruct`ã€`Stable-Diffusion-v1.5`ã€`RWKV-4-pile-14B`ã€`RWKV-5-World`ã€`RWKV-Raven-14B`ã€`Falcon-40B`ã€`MPT-30B-instruct`ã€`Flan-UL2`ã€`Cerebras-GPT-13B`ã€`Cerebras-GPT-6.7B`ã€`Pythia-12B`ã€`Pythia-6.9B`ã€`GPT-J-6B`ã€`GPT-NeoX-20B`ã€`OA-Pythia-12B-SFT-4`ã€`GPT4All-J`ã€`StableLM-Alpha-7B` ã€ `StarCoder`ã€`Promptæ¨¡æ¿`æ¨¡å‹çš„APIï¼ˆå•è½®å¯¹è¯ã€è¿ç»­å¯¹è¯ã€æµå¼è¿”å›ã€å›¾ç‰‡ç”Ÿæˆï¼‰ã€‚
- åç»­å°†å¢åŠ æ›´å¤šæ¨¡å‹çš„æ”¯æŒã€‚


## ğŸš€ å¿«é€Ÿå¼€å§‹

[ä½¿ç”¨demo](https://github.com/gemingjia/springboot-wenxin-demo)

```text
æ­¤ç‰ˆæœ¬è¿‘ä¹é‡æ„æ•´ä¸ªé¡¹ç›®ï¼Œå®¢æˆ·ç«¯ä¸å‚æ•°ç±»çš„è·¯å¾„æœ‰å˜åŒ–ï¼Œä¸ä¹‹å‰ç‰ˆæœ¬çš„å­˜åœ¨ä¸€å®šçš„ä¸å…¼å®¹æƒ…å†µï¼Œæ–¹æ³•æœªæ”¹å˜ï¼Œé‡æ–°å¯¼åŒ…å³å¯ã€‚

"Bloomz7BClient" -> "BloomZ7BClient"

é™¤"ErnieBot"ä¸"Prompt"å¤–ï¼Œå…¶ä½™çš„å¯¹è¯å‹æ¨¡å‹æ¥æ”¶å‚æ•°ç±»ç»Ÿä¸€ä¸º ChatBaseRequestï¼Œå“åº”ç±»ä¸º ChatResponse
å›¾ç‰‡ç”Ÿæˆå‹æ¨¡å‹æ¥æ”¶å‚æ•°ç±»ç»Ÿä¸€ä¸º ChatImageRequestï¼Œå“åº”ç±»ä¸º ImageBaseRequestï¼Œå†…å®¹ä¸ºbase64ç¼–ç çš„å›¾ç‰‡ã€‚
```

### 1ã€æ·»åŠ ä¾èµ–
Repository Path: [/io/github/gemingjia/gear-wenxinworkshop-starter)
- Maven
```xml
<!-- è‹¥ä¸­å¤®ä»“åº“æœªæ›´æ–°å¯æ‰‹åŠ¨æ·»åŠ  -->
<dependency>
  <groupId>io.github.gemingjia</groupId>
  <artifactId>gear-wenxinworkshop-starter</artifactId>
  <version>0.0.6</version>
</dependency>
```
- Gradle
```gradle
dependencies {
  implementation 'io.github.gemingjia:gear-wenxinworkshop-starter:0.0.6' 
}
```

### 2ã€æ·»åŠ access-token
- application.yml & application.yaml
  ```yaml
  gear:
    wenxin:
      access-token: xx.xxxxxxxxxx.xxxxxx.xxxxxxx.xxxxx-xxxx
  ```
- application.properties
  ```properties
  gear.wenxin.access-token=xx.xxxxxxxxxx.xxxxxx.xxxxxxx.xxxxx-xxxx
  ```

### 3ã€è°ƒç”¨ç¤ºä¾‹
```java

@RestController
public class ChatController {

     // è¦è°ƒç”¨çš„æ¨¡å‹çš„å®¢æˆ·ç«¯
    @Resource
    private ErnieBotClient ernieBotClient;

    // å•æ¬¡å¯¹è¯
    @PostMapping("/chat")
    public BaseResponse<String> chatSingle(String msg) {
        ChatResponse response = ernieBotClient.chatSingle(msg);
        return BaseResponse.success(response.getResult());
    }

    // è¿ç»­å¯¹è¯
    @PostMapping("/chats")
    public BaseResponse<String> chatCont(String msg) {
        String chatUID = "test-user-1001";
        ChatResponse response = ernieBotClient.chatCont(msg, chatUID);
        return BaseResponse.success(response.getResult());
    }

    // æµå¼è¿”å›ï¼Œå•æ¬¡å¯¹è¯
    @PostMapping(value = "/stream/chat", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public Flux<ChatResponse> chatSingleStream(String msg) {
        Flux<ChatResponse> chatResponseFlux = ernieBotClient.chatSingleOfStream(msg);
        return chatResponseFlux;
    }

    // æµå¼è¿”å›ï¼Œè¿ç»­å¯¹è¯
    @PostMapping(value = "/stream/chats", produces = MediaType.TEXT_EVENT_STREAM_VALUE)
    public Flux<ChatResponse> chatContStream(String msg, String msgUid) {
        Flux<ChatResponse> chatResponseFlux = ernieBotClient.chatContOfStream(msg, msgUid);
        return chatResponseFlux;
    }

    // æ¨¡æ¿å¯¹è¯
    @PostMapping("/rompt")
    public BaseResponse<PromptResponse> chatSingle() {
        Map<String, String> map = new HashMap<>();
        map.put("article", "æˆ‘çœ‹è§è¿‡æ³¢æ¾œå£®é˜”çš„å¤§æµ·ï¼Œç©èµè¿‡æ°´å¹³å¦‚é•œçš„è¥¿æ¹–ï¼Œå´ä»æ²¡çœ‹è§è¿‡æ¼“æ±Ÿè¿™æ ·çš„æ°´ã€‚æ¼“æ±Ÿçš„æ°´çœŸé™å•Šï¼Œé™å¾—è®©ä½ æ„Ÿè§‰ä¸åˆ°å®ƒåœ¨æµåŠ¨ã€‚");
        map.put("number", "20");
        PromptRequest promptRequest = new PromptRequest();
        promptRequest.setId(1234);
        promptRequest.setParamMap(map);
        PromptResponse promptResponse = promptBotClient.chatPrompt(promptRequest);

        return BaseResponse.success(promptResponse);
    }

}
```

## ğŸ“‘ä½¿ç”¨æ–‡æ¡£

<div>
ç‚¹å‡»è·³è½¬ => 
<a href="/wenxin-doc.md">ä½¿ç”¨æ–‡æ¡£</a>
</div>

## å¼€æºåè®®
[LICENSE](https://www.apache.org/licenses/LICENSE-2.0)
